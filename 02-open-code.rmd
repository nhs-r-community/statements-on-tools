# Open code in the NHS

## Introduction

There are number of organisations and publications advocating open coding in its various guises within the NHS and more
generally across the public sector and academia.  This page is intended as a place to collate pertinent literature and
proposed/tried approaches to implementation of open code policies in situations in the NHS from individual teams up to
entire organisations.

There is also a significant crossover between open code and software engineering best practice, which means that they
are often (always?) promoted together as an effective means to improve reproducibility, 

### Glossary (DRAFT)

- **Reproducible Analytics Pipelines (RAP)**: analytics processes developed in open source programming languages and
adhering to software engineering best practices to allow for reproducing analyses with very little effort.
- **Repo/Repository**: a set of files organised in a project for a specific purpose (such as 
[statements-on-tools][statments-on-tools] itself), containing code or documentation under version control.

## References

The following is a list of some of the material available online discussing and supporting open coding and software 
engineering approaches to code development in the NHS:

- Better, broader, safer using health data for research and analysis. Also known as [The Goldacre Report](https://www.gov.uk/government/publications/better-broader-safer-using-health-data-for-research-and-analysis/better-broader-safer-using-health-data-for-research-and-analysis)[-@goldacre_2022] - a systematic and far-reaching report, written on behalf of the Department of Health and Social Care, advocating for open coding and Reproducible Analytical Pipelines (RAP) in the NHS,
- Government Analysis Function [Reproducible Analytical Pipelines (RAP) Strategy](https://analysisfunction.civilservice.gov.uk/policy-store/reproducible-analytical-pipelines-strategy/)[-@af-rap] - released in June 2022 this is a comprehensive strategy for Government in summarising the finding of the RAP strategy since 2017 and the plan for future work,
- Office for Statistics Regulation â€“ [Overcoming Barriers to Adoption of RAP](https://osr.statisticsauthority.gov.uk/publication/reproducible-analytical-pipelines-overcoming-barriers-to-adoption/)[-@osr_rap] - a report written in support of RAP for adoption by all government departments doing analytics, describing the challenges and recommending solutions to address those challenges covering both organisational, team-level and individual barriers,
- NHSx [Open Source Policy](https://github.com/nhsx/open-source-policy/blob/main/open-source-policy.md)[-@nhsx_osp] - a comprehensive description of why and how open source should be implemented in the NHS, including statements about best practice and a checklist for open sourcing code,
- NHS England [Open Source Programme]([Open Source Programme](https://www.england.nhs.uk/digitaltechnology/open-source/), although NHSx became part of NHS England in 2022 the previous policy has not been rebranded (as of Jan 2023) but NHS England has a site about the Open Source Programme,
- NHS Digital [RAP Community of Practice](https://nhsdigital.github.io/rap-community-of-practice/)[-@nhsd_rap] - a wealth of material pertaining to setting up and running RAP. The team also write [blogs](https://digital.nhs.uk/blog/data-points-blog).


## Specific challenges

### Opening code without exposing data/'secrets'

This issue is often raised (and rightly) when discussing open sourcing of code - how do you ensure that personal
clinical or other sensitive data are not shared?  In practice there are a number of approaches to this (see the 
NHS-X Open Source Policy[-@nhsx_osp] for more practical advice on this) including setting up repos with automated
checking for datasets and secrets (such as API keys) in order that risk of unintentional disclosure is minimised.

### Opening code without giving away commercial/business/clinical proprietary information (and IP)

Many members of the NHS-R community work in teams or individually without any formal training or support to enable them
to determine whether there would be significant ramifications of publishing particular code, especially where business
processes might be encoded in the project, or where there might be some IP issue. This makes the prospect of open
sourcing rather daunting.

### Coding in the open

The NHS-X Open Source Policy[-@nhsx_osp] recommends that all development/analytics work done in the NHS be coded in the
open unless there is good reason not to.  However it also states that
["an internal code review should be conducted for all open source projects before publication"][nhsx_code_review],
which is at odds with coding in the open.

[statements_on_tools]: https://github.com/nhs-r-community/statements-on-tools
[nhsd_rap_cop]: https://github.com/NHSDigital/rap-community-of-practice
[nhsx_code_review]: https://github.com/nhsx/open-source-policy/blob/main/open-source-policy.md#e-assurance-requirements