<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Statement on using tools | NHS-R Community Handbook</title>
  <meta name="description" content="A set of resources for anyone using R within the NHS and beyond." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Statement on using tools | NHS-R Community Handbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/logo.jpg" />
  <meta property="og:description" content="A set of resources for anyone using R within the NHS and beyond." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Statement on using tools | NHS-R Community Handbook" />
  
  <meta name="twitter:description" content="A set of resources for anyone using R within the NHS and beyond." />
  <meta name="twitter:image" content="/images/logo.jpg" />

<meta name="author" content="NHS-R Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="open-code.html"/>
<link rel="next" href="vision.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NHS-R Community Handbook</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="1" data-path="purpose.html"><a href="purpose.html"><i class="fa fa-check"></i><b>1</b> Purpose</a></li>
<li class="chapter" data-level="2" data-path="open-code.html"><a href="open-code.html"><i class="fa fa-check"></i><b>2</b> Open code</a>
<ul>
<li class="chapter" data-level="2.1" data-path="open-code.html"><a href="open-code.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="open-code.html"><a href="open-code.html#glossary-draft"><i class="fa fa-check"></i><b>2.1.1</b> Glossary (DRAFT)</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="open-code.html"><a href="open-code.html#references"><i class="fa fa-check"></i><b>2.2</b> References</a></li>
<li class="chapter" data-level="2.3" data-path="open-code.html"><a href="open-code.html#specific-challenges"><i class="fa fa-check"></i><b>2.3</b> Specific challenges</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="open-code.html"><a href="open-code.html#opening-code-without-exposing-datasecrets"><i class="fa fa-check"></i><b>2.3.1</b> Opening code without exposing data/‘secrets’</a></li>
<li class="chapter" data-level="2.3.2" data-path="open-code.html"><a href="open-code.html#opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-ip"><i class="fa fa-check"></i><b>2.3.2</b> Opening code without giving away commercial/business/clinical proprietary information (and IP)</a></li>
<li class="chapter" data-level="2.3.3" data-path="open-code.html"><a href="open-code.html#coding-in-the-open"><i class="fa fa-check"></i><b>2.3.3</b> Coding in the open</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html"><i class="fa fa-check"></i><b>3</b> Statement on using tools</a>
<ul>
<li class="chapter" data-level="3.1" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#about-this-document"><i class="fa fa-check"></i><b>3.1</b> About this document</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#some-use-cases-for-this-document"><i class="fa fa-check"></i><b>3.1.1</b> Some use cases for this document</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#introduction-1"><i class="fa fa-check"></i><b>3.2</b> Introduction</a></li>
<li class="chapter" data-level="3.3" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#what-is-inside-a-package"><i class="fa fa-check"></i><b>3.3</b> What is inside a package?</a></li>
<li class="chapter" data-level="3.4" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#why-not-include-all-this-useful-code-in-r"><i class="fa fa-check"></i><b>3.4</b> Why not include all this useful code in R?</a></li>
<li class="chapter" data-level="3.5" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#where-do-you-find-packages"><i class="fa fa-check"></i><b>3.5</b> Where do you find packages?</a></li>
<li class="chapter" data-level="3.6" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#an-example"><i class="fa fa-check"></i><b>3.6</b> An example</a></li>
<li class="chapter" data-level="3.7" data-path="statement-on-using-tools.html"><a href="statement-on-using-tools.html#whats-the-problem"><i class="fa fa-check"></i><b>3.7</b> What’s the problem</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vision.html"><a href="vision.html"><i class="fa fa-check"></i><b>4</b> Vision</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NHS-R Community Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="statement-on-using-tools" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Statement on using tools</h1>
<p>The <a href="https://nhsrcommunity.com/about/">NHS-R community</a> aims to support the learning, application and exploitation of <a href="https://www.r-project.org/about.html">R</a> in the NHS. A key part of this aim is to support every organisation in making R available as a viable means of conducting healthcare analytics.</p>
<div id="about-this-document" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> About this document</h2>
<p>This document elaborates what is required to make R viable in practice. R is a powerful language for statistical work and other kinds of data analysis. Much of this power comes from the way that R fits together with two important helpers: <a href="https://www.rstudio.com/">R Studio</a> and R packages. This document describes the way that R, R Studio, and R packages work together in non-technical language. Our aim in writing this simple introduction is to provide a useful resource to leaders within the NHS and other organisations in health and care who wish to support and encourage the use of R in their practice. Our motive in writing this document is to overcome the institutional reluctance that is often encountered when trying to use new open-source tools. For many years we have had guidance that open source programs should be encouraged. Yet open source tools are frequently identified as security or information governance risks by organisations. We think that these concerns are largely the result of confusion about the nature of open source tools. This document is therefore aimed at clearing up some of this confusion, by providing a simple, non-technical, and focused introduction to the tools that are an integral part of R.</p>
<p>Although the current focus of this document is specific to R and its tools, we note that similar situations are found in many other languages and programmes. We discuss this below in the section <em>Why not include all this useful code in R?</em>. As the NHS-R Community matures we may extend this learning to cover other open-source tools such as Python.</p>
<div id="some-use-cases-for-this-document" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Some use cases for this document</h3>
<ul>
<li>To provide guidance to Information Governance (IG) practitioners who have been asked to evaluate the use of R in some health and care context</li>
<li>To provide reassurance and explanation to collegues and managers when R is being considered for use in some project</li>
<li>To support those new to R in understanding how the many packages and tools fit together</li>
</ul>
</div>
</div>
<div id="introduction-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Introduction</h2>
<p>R uses <strong>packages</strong>. Packages are small, reusable packages of code that allow users to create and use new functions. These packages can be easily distributed so that users can adopt them in the code that they are writing. To illustate, imagine that you run into a tricky problem programming problem. We can think of three different ways of solving this problem:</p>
<ol style="list-style-type: decimal">
<li>Write all-new code from scratch</li>
<li>Copy-paste working code from somewhere else</li>
<li>Use a package</li>
</ol>
<p>The traditional approach might be to solve the problem by writing completely new code from scratch. And sometimes writing original code is the best way to solve problems, particularly if those problems are very unusual.</p>
<p>Often though the problems that we encounter are not at all unusual. Commonly encountered problems are, by definition, the kind of problems that we would most often encounter. We give an example below about times and dates, which frequently cause problems for programmers. Writing a completely original solution each time we encounter a common problem seems inefficient. So it is no surprise that code reuse is common practice across the field. The scale of websites dedicated to sharing useful code (like <a href="https://stackoverflow.com/">stack overflow</a>) is testament to the deep sense of professional loathing that many programmers have for inefficiency in their work.</p>
<p>But finding and sharing reliable code to solve common problems comes with difficulties of its own. You could look for solutions online, and then copy and paste any promising code chunks into your project. While generally quicker and easier than writing new code from scratch, copying code manually requires a surprisingly high degree of skill. Both an expert’s eye for assessing possible solutions, and the skills to appropriately adjust borrowed code to fit the requirements of your project are needed.</p>
<p>Packages are a way of standardising and sharing useful code. Rather than copying and adjusting a block of code, you simply add the package to your programme. You can then use the new functions contained in the package as if you had written them yourself. They are a consistent way to extend the functions available to user. Many programming languages use packages (or libraries) in a similar way. Python is a good example, where many useful functions are done using third-party packages.</p>
<p>Packages make R better: easier to use and learn, more flexible, and with richer options for analysis. They are a feature and not a bug, and for many users their work in R utterly depends on packages.</p>
</div>
<div id="what-is-inside-a-package" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> What is inside a package?</h2>
<blockquote>
<p>“In R, the fundamental unit of shareable code is the package. A package bundles together code, data, documentation, and tests, and is easy to share with others.” <a href="https://r-pkgs.org/intro.html">Wickham and Bryan, 2019. R packages: Organize, Test, Document and Share Your Code</a></p>
</blockquote>
<p>To illustrate, we can show the code from two related NHS-R packages: <a href="https://github.com/nhs-r-community/NHSRplotthedots">NHSRplotthedots</a> (<a href="https://cran.r-project.org/web/packages/NHSRplotthedots/index.html">CRAN</a>) and <a href="https://github.com/nhs-r-community/NHSRdatasets">NHSRdatasets</a> (<a href="https://cran.r-project.org/package=NHSRdatasets">CRAN</a>)</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Code</td>
<td>Allows the user to use functions in their own code</td>
<td><img src="https://i.imgur.com/LflSDU2.png" height="100"> <br> the code for the <em>ptd_spc</em> function used to create SPC charts</td>
</tr>
<tr class="even">
<td>Data</td>
<td>Demonstrates the function(s), training new users</td>
<td><img src="https://i.imgur.com/0QUnwpr.png" height="100"> <br> sample of NHSR dataset linked to NHSRplotthedots</td>
</tr>
<tr class="odd">
<td>Documentation</td>
<td>User guides, package vignettes and other documentation</td>
<td><img src="https://i.imgur.com/QzqF3Cq.png" height="100"> <br> documentation for the <em>ptd_spc</em> function</td>
</tr>
</tbody>
</table>
<p>And we can usually find at least three of these components in most R packages (tests are a bit more elusive, and are less commonly encountered). It’s also worth noting that the data included in community packages is sample data or open data that is really meant to help users experiment with the new functions in a package. It’s definitely not standard practice to share real data for analysis in this way. Lots of these standard datasets built into packages - like <a href="https://www.rdocumentation.org/packages/datasets/versions/3.6.2/topics/mtcars">mtcars</a> - are used over and over again as ways of demonstrating R functions.</p>
<p>If you’re writing a package, we would encourage caution as to the data that you include. We won’t provide detailed guidance here on what’s okay to include in your package. But would be useful to remind package authors that the proper oversight should be carried out before sharing any data as part of your package.</p>
</div>
<div id="why-not-include-all-this-useful-code-in-r" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Why not include all this useful code in R?</h2>
<p>Call the approach that R takes modular. R provides some core functions, but users are able to add modules (packages) that change the functions that are available. It’s like being able to customize the tools that you use to work on each project.</p>
<p>Users coming to R from software that does not work like this can find this modular approach messy and odd. If you’ve grown up working in Microsoft Excel, then you will be accustomed to doing almost any task using just the build-in functions in the core software. For that user, switching to an environment where the user has to select and add small, specific, tools to achieve things can feel rather alien. And this difference has deep roots, representing a deep difference in software engineering philosophy. R broadly follows a UNIX-like small tools approach as a way of managing and reducing the complexity of computer systems. As Eric Raymond put it, this is one of the central rules of the UNIX philosophy:</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>Rule of Modularity: Write simple parts connected by clean interfaces.
<a href="http://www.catb.org/~esr/writings/taoup/html/ch01s06.html">Raymond 2003 The Art of UNIX Progamming</a></li>
</ol>
</blockquote>
<p>Another reason: each project written in R is different. Isn’t it great to be able to select just the right tools needed to do the job properly? On this, you can find a list of some of the packages that the NHS-R community find particularly useful at <a href="https://github.com/nhs-r-community/awesome-nhsr">https://github.com/nhs-r-community/awesome-nhsr</a>.</p>
</div>
<div id="where-do-you-find-packages" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Where do you find packages?</h2>
<p>The recognised global repository for R packages is called CRAN (the <a href="https://cran.r-project.org/">Comprehensive R Archive Network</a>). R packages must pass through a strict system of checks across multiple platforms if they’re to be accepted into CRAN. Acceptance is a sign of quality and a protective measure that helps ensure that packages meet minimum standards. It also provides extra assurance to business IT teams that the packages are ‘safe’ for use.</p>
<p>The power of packages is reflected in the number of them that are available. CRAN currently lists a total of 18872 packages. Adding and updating packages is one of the ways that R keeps developing. Many community groups - including <a href="https://nhsrcommunity.com/about">NHS-R</a> - have produced packages to do useful things for their work. And these packages are freely available to the community.</p>
<p>That community spirit is an important part of the open software movement. We think that sharing useful code in an open way is important. Governments too think similarly. For example, see the requirement to make new code open source from <a href="https://service-manual.nhs.uk/standards-and-technology/service-standard-points/12-make-new-source-code-open">NHS England digital openness</a> and similar from ScotGov. The recent Goldacre review (2022) comes to similar conclusions:</p>
<blockquote>
<p><strong>Libraries</strong>
Useful functions often outgrow individual projects and build a broader user-base, especially when a large number of users are all trying to solve the same suite of related problems, with a range of related functions. When this happens, more experienced programmers move the work into reusable code ‘libraries’ and share them through package indexes or archive networks. The process of creating and sharing libraries can improve the quality of code, because work that is more widely used is likely to be more widely reviewed. Popular libraries tend to be well documented and come with clear explanations and examples, which decrease the barriers to entry for inexperienced coders: when more people use the work, more people invest in improving it. By creating and sharing a library, researchers contribute to the broader research community. This more advanced variety of code sharing is common in many areas of scientific research, such as Geographic Information Science, but it is less common at present in health data research.</p>
</blockquote>
<p><a href="https://www.gov.uk/government/publications/better-broader-safer-using-health-data-for-research-and-analysis/better-broader-safer-using-health-data-for-research-and-analysis#information-governance-ethics-and-participation">Better, broader, safer: using health data for research and analysis</a></p>
<p>We believe that this approach is safe, and are not aware of any data protection issues that have arised because of the use of packages in R.</p>
</div>
<div id="an-example" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> An example</h2>
<p><img src="https://i.imgur.com/DPrxXXj.jpg" height="300"></p>
<p><a href="https://www.reddit.com/r/ProgrammerHumor/comments/d51l9u/the_counter_was_reset_today_we_were_almost_into/">image credit</a></p>
<p>Working with dates is often a source of pain for data analysts. That’s because times and dates are surprisingly complicated. For example, there are lots of ways of storing and representing dates. There are also many inconsistencies - 24 hours in a day but 60 seconds in a minute, leap years, different numbers of days in months, time zones, and so on.</p>
<p>Many analysts use an R package called <a href="https://lubridate.tidyverse.org/">lubridate</a> to help manage dates and times. This package has lots of helpful functions for parsing, calculating, and representing dates and times. For example, imagine that you want to calculate the number of seconds between two dates. For simple cases, that’s not too hard to do in base R. But what if some of your time values cross time zones? What if clock time has changed (say, due to daylight savings) during that interval? The functions in the lubridate package allow analysts to ignore some of this complexity, meaning that they don’t need to write many lines of code in order to accomodate time zones each time they want to do a simple duration calculation.</p>
</div>
<div id="whats-the-problem" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> What’s the problem</h2>
<p>As we’ve discussed above, the philosophy of using packages in R is rather different from other approaches. This can cause difficulties, particularly when risk management practices often assume that a programme is a broadly stable lump of functions, rather than a loose coalition of packages. To identify of this issues that we have encountered:</p>
<ul>
<li><p>Packages present a moving target for information governance. How can we assess the risk of something that is always liable to change?
Our response to this: consider the system (R, RStudio, and packages) as the correct unit of analysis. Because packages are so widely used, it does not make sense to carry out information governance assessments of R by itself.</p></li>
<li><p>There are so many packages (c.19k packages on CRAN), and there are several different sources for packages. How can we be sure that they are all safe?
Our response to this is to point to community standards for packages. For example, <a href="https://cran.r-project.org/web/packages/policies.html">CRAN</a> carries out oversight on submitted packages, which have to meet certain standards. This precludes some worries about what might be lurking in a hypothetical package. It is also worth saying that we are aware of no cases where R packages have lead to security problems for users.</p></li>
<li><p>Packages contain data, and therefore need data protection impact assessment.
As discussed above, the data in R packages is used for testing, training, and demonstration purposes only, and isn’t a method for sharing live data between users.</p></li>
<li><p>How can free software be trustworthy? Isn’t there going to be a catch? And who is responsible for ensuring the quality and safety of this software?
Free open-source software (FOSS) is now widely used across sectors. Useful comments in FAQ section of <a href="https://sites.google.com/nihr.ac.uk/hsma/apply-to-become-an-hsma?authuser=0">HSMA</a> site:</p></li>
</ul>
<blockquote>
<p>It is also important to highlight that all software has potential vulnerabilities, including the proprietary software that you already have installed. Therefore, good software security practices should be maintained regardless of the software you are using.</p>
</blockquote>
<div style="page-break-after: always;"></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="open-code.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vision.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
